export const session9 = {
    title: "Dynamic Memory Allocation",
    content: `<style>.c-lesson{padding:0;margin:0}.c-lesson h2{color:#00599c;margin-top:40px;margin-bottom:20px;font-size:1.8em;border-left:5px solid #00599c;padding-left:15px}.hero-box{background:linear-gradient(135deg,rgba(0,89,156,0.1) 0%,rgba(0,71,125,0.1) 100%);border-radius:15px;padding:30px;margin:30px 0;text-align:center;border:2px solid rgba(0,89,156,0.2)}.info-box{background:#f8f9fa;border-left:5px solid #00599c;padding:20px;margin:25px 0;border-radius:8px}.code-box{background:#1e1e1e;color:#d4d4d4;padding:20px;border-radius:10px;margin:20px 0;font-family:monospace;overflow-x:auto;font-size:14px}.quiz-box{background:#fff9e6;padding:25px;border-radius:15px;margin-top:30px;border:3px solid #ffd700}.fun-fact{background:#e8f5e9;border-left:5px solid #4caf50;padding:20px;margin:25px 0;border-radius:8px}</style><div class="c-lesson"><div class="hero-box"><div style="font-size:60px;margin-bottom:15px">üß†</div><p>Dynamic Memory: Allocate memory at runtime!</p></div><h2>üíæ malloc() - Memory Allocation</h2><div class="code-box">#include &lt;stdlib.h&gt;<br><br>// Allocate memory for single integer<br>int *ptr = (int*)malloc(sizeof(int));<br><br>if (ptr == NULL) {<br>    printf("Memory allocation failed\\n");<br>    return 1;<br>}<br><br>*ptr = 42;<br>printf("%d\\n", *ptr);<br><br>free(ptr);  // Always free!<br><br>// Allocate array<br>int *arr = (int*)malloc(5 * sizeof(int));<br>for (int i = 0; i &lt; 5; i++) {<br>    arr[i] = i * 10;<br>}<br>free(arr);</div><h2>üîÑ calloc() - Contiguous Allocation</h2><div class="code-box">// Allocates and initializes to zero<br>int *arr = (int*)calloc(5, sizeof(int));<br><br>// All elements are 0<br>for (int i = 0; i &lt; 5; i++) {<br>    printf("%d ", arr[i]);  // 0 0 0 0 0<br>}<br><br>free(arr);</div><h2>üìè realloc() - Resize Memory</h2><div class="code-box">int *arr = (int*)malloc(5 * sizeof(int));<br><br>// Initialize<br>for (int i = 0; i &lt; 5; i++) {<br>    arr[i] = i;<br>}<br><br>// Resize to 10 elements<br>arr = (int*)realloc(arr, 10 * sizeof(int));<br><br>if (arr == NULL) {<br>    printf("Reallocation failed\\n");<br>    return 1;<br>}<br><br>// New elements are uninitialized<br>for (int i = 5; i &lt; 10; i++) {<br>    arr[i] = i;<br>}<br><br>free(arr);</div><h2>üóëÔ∏è free() - Deallocate Memory</h2><div class="code-box">int *ptr = (int*)malloc(sizeof(int));<br><br>// Use the memory<br>*ptr = 100;<br><br>// Free when done<br>free(ptr);<br><br>// Good practice: set to NULL<br>ptr = NULL;<br><br>// Avoid double free!<br>// free(ptr);  // ERROR if not NULL</div><h2>‚ö†Ô∏è Memory Leaks</h2><div class="code-box">// BAD: Memory leak<br>void badFunction() {<br>    int *ptr = (int*)malloc(sizeof(int));<br>    *ptr = 42;<br>    // Forgot to free!<br>}  // Memory leaked<br><br>// GOOD: Proper cleanup<br>void goodFunction() {<br>    int *ptr = (int*)malloc(sizeof(int));<br>    *ptr = 42;<br>    free(ptr);  // Freed properly<br>}</div><h2>üéØ Dynamic Arrays</h2><div class="code-box">// Get size from user<br>int n;<br>printf("Enter size: ");<br>scanf("%d", &n);<br><br>// Allocate array<br>int *arr = (int*)malloc(n * sizeof(int));<br><br>if (arr == NULL) {<br>    printf("Allocation failed\\n");<br>    return 1;<br>}<br><br>// Use array<br>for (int i = 0; i &lt; n; i++) {<br>    arr[i] = i * i;<br>}<br><br>// Print<br>for (int i = 0; i &lt; n; i++) {<br>    printf("%d ", arr[i]);<br>}<br><br>free(arr);</div><h2>üèóÔ∏è Dynamic Structures</h2><div class="code-box">typedef struct {<br>    char name[50];<br>    int age;<br>} Person;<br><br>// Allocate single structure<br>Person *p = (Person*)malloc(sizeof(Person));<br>strcpy(p->name, "John");<br>p->age = 25;<br>free(p);<br><br>// Allocate array of structures<br>int n = 3;<br>Person *people = (Person*)malloc(n * sizeof(Person));<br><br>for (int i = 0; i &lt; n; i++) {<br>    sprintf(people[i].name, "Person%d", i);<br>    people[i].age = 20 + i;<br>}<br><br>free(people);</div><h2>üìä 2D Dynamic Arrays</h2><div class="code-box">int rows = 3, cols = 4;<br><br>// Allocate array of pointers<br>int **matrix = (int**)malloc(rows * sizeof(int*));<br><br>// Allocate each row<br>for (int i = 0; i &lt; rows; i++) {<br>    matrix[i] = (int*)malloc(cols * sizeof(int));<br>}<br><br>// Use matrix<br>for (int i = 0; i &lt; rows; i++) {<br>    for (int j = 0; j &lt; cols; j++) {<br>        matrix[i][j] = i * cols + j;<br>    }<br>}<br><br>// Free memory<br>for (int i = 0; i &lt; rows; i++) {<br>    free(matrix[i]);<br>}<br>free(matrix);</div><h2>üîç malloc vs calloc vs realloc</h2><div class="info-box"><strong>malloc:</strong><ul><li>Allocates uninitialized memory</li><li>Faster (no initialization)</li><li>Use when you'll initialize yourself</li></ul><strong>calloc:</strong><ul><li>Allocates and zeros memory</li><li>Slower (initializes to 0)</li><li>Use when you need zero-initialized memory</li></ul><strong>realloc:</strong><ul><li>Resizes previously allocated memory</li><li>Preserves existing data</li><li>May move memory to new location</li></ul></div><h2>‚ö° Best Practices</h2><div class="code-box">// 1. Always check for NULL<br>int *ptr = (int*)malloc(sizeof(int));<br>if (ptr == NULL) {<br>    // Handle error<br>}<br><br>// 2. Free what you allocate<br>free(ptr);<br><br>// 3. Set to NULL after free<br>ptr = NULL;<br><br>// 4. Don't use after free<br>// *ptr = 10;  // ERROR!<br><br>// 5. Match malloc/free pairs<br>// Every malloc needs a free!</div><div class="fun-fact"><strong>üåü Heap vs Stack:</strong><p style="margin-top:10px;margin-bottom:0">malloc() allocates from the heap, which is much larger than the stack. Use dynamic allocation for large data or when size is unknown at compile time. But remember: with great power comes great responsibility - always free your memory!</p></div><div class="quiz-box"><h3>üß† Test Your Knowledge!</h3><p><strong>Question:</strong> What's the main difference between malloc() and calloc()?</p><ul><li>A) malloc is faster</li><li>B) calloc initializes memory to zero ‚úì</li><li>C) malloc allocates more memory</li><li>D) No difference</li></ul><p style="margin-top:15px"><em>Answer: B - calloc() initializes allocated memory to zero!</em></p></div></div>`,
    questions: [{ q: "What's the main difference between malloc() and calloc()?", options: ["malloc is faster", "calloc initializes memory to zero", "malloc allocates more memory", "No difference"], answer: 1 }],
    tools: [{ name: "Memory Tracker", type: "interactive", description: "Track memory allocations" }]
};
