export const session8 = {
    title: "Linker Scripts Fundamentals",
    content: `<style>.firmware-lesson{padding:0;margin:0}.firmware-lesson h2{color:#e74c3c;margin-top:40px;margin-bottom:20px;font-size:1.8em;border-left:5px solid #e74c3c;padding-left:15px}.hero-box{background:linear-gradient(135deg,rgba(231,76,60,0.1) 0%,rgba(192,57,43,0.1) 100%);border-radius:15px;padding:30px;margin:30px 0;text-align:center;border:2px solid rgba(231,76,60,0.2)}.info-box{background:#f8f9fa;border-left:5px solid #e74c3c;padding:20px;margin:25px 0;border-radius:8px}.cards-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:25px 0}.info-card{background:linear-gradient(135deg,rgba(231,76,60,0.08) 0%,rgba(192,57,43,0.08) 100%);padding:25px;border-radius:12px;border:2px solid rgba(231,76,60,0.2);transition:all 0.3s ease}.info-card:hover{transform:translateY(-5px);box-shadow:0 10px 25px rgba(231,76,60,0.2)}.card-icon{font-size:50px;margin-bottom:15px;display:block}.info-card h4{color:#e74c3c;margin-bottom:10px;font-size:1.2em}.firmware-lesson p{color:#333;margin-bottom:15px;font-size:1.05em;line-height:1.7}.firmware-lesson ul{margin:15px 0 15px 25px}.code-box{background:#1e1e1e;color:#d4d4d4;padding:20px;border-radius:10px;margin:20px 0;font-family:monospace;overflow-x:auto;font-size:14px}.quiz-box{background:#fff9e6;padding:25px;border-radius:15px;margin-top:30px;border:3px solid #ffd700}.fun-fact{background:#e8f5e9;border-left:5px solid #4caf50;padding:20px;margin:25px 0;border-radius:8px}</style><div class="firmware-lesson"><div class="hero-box"><div style="font-size:60px;margin-bottom:15px">üó∫Ô∏è</div><p>Linker Scripts: The blueprint for your firmware's memory layout!</p></div><h2>üéØ What is a Linker Script?</h2><p>A <strong>linker script</strong> tells the linker where to place code and data in memory. It's essential for embedded systems because you must precisely control what goes in Flash vs RAM!</p><div class="info-box"><strong>Why Linker Scripts Matter:</strong><ul><li>Define Flash and RAM regions</li><li>Place code in Flash, data in RAM</li><li>Set stack and heap locations</li><li>Define entry point</li><li>Create custom memory sections</li></ul></div><h2>üìã Basic Linker Script Structure</h2><div class="code-box">/* STM32F407.ld - Linker Script */<br><br>/* Entry point */<br>ENTRY(Reset_Handler)<br><br>/* Memory regions */<br>MEMORY<br>{<br>    FLASH (rx)  : ORIGIN = 0x08000000, LENGTH = 512K<br>    RAM (rwx)   : ORIGIN = 0x20000000, LENGTH = 128K<br>}<br><br>/* Sections */<br>SECTIONS<br>{<br>    .text : {<br>        /* Code goes here */<br>    } > FLASH<br>    <br>    .data : {<br>        /* Initialized data */<br>    } > RAM AT> FLASH<br>}</div><h2>üó∫Ô∏è MEMORY Command</h2><div class="code-box">MEMORY<br>{<br>    /* name (attr) : ORIGIN = address, LENGTH = size */<br>    <br>    FLASH (rx)  : ORIGIN = 0x08000000, LENGTH = 512K<br>    RAM (rwx)   : ORIGIN = 0x20000000, LENGTH = 128K<br>    CCMRAM (rw) : ORIGIN = 0x10000000, LENGTH = 64K<br>}<br><br>/* Attributes:<br>   r = readable<br>   w = writable<br>   x = executable<br>   a = allocatable<br>   i = initialized<br>*/</div><h2>üì¶ SECTIONS Command</h2><div class="code-box">SECTIONS<br>{<br>    /* Vector table (must be first!) */<br>    .isr_vector : {<br>        . = ALIGN(4);<br>        KEEP(*(.isr_vector))<br>        . = ALIGN(4);<br>    } > FLASH<br>    <br>    /* Program code */<br>    .text : {<br>        . = ALIGN(4);<br>        *(.text)           /* All .text sections */<br>        *(.text*)          /* All .text.* sections */<br>        *(.rodata)         /* Read-only data */<br>        *(.rodata*)<br>        . = ALIGN(4);<br>    } > FLASH<br>    <br>    /* Initialized data (copied from Flash to RAM) */<br>    .data : {<br>        . = ALIGN(4);<br>        _sdata = .;        /* Start of .data */<br>        *(.data)<br>        *(.data*)<br>        . = ALIGN(4);<br>        _edata = .;        /* End of .data */<br>    } > RAM AT> FLASH<br>    <br>    /* Uninitialized data (zeroed by startup code) */<br>    .bss : {<br>        . = ALIGN(4);<br>        _sbss = .;<br>        *(.bss)<br>        *(.bss*)<br>        *(COMMON)<br>        . = ALIGN(4);<br>        _ebss = .;<br>    } > RAM<br>}</div><h2>üéØ Complete STM32F4 Linker Script</h2><div class="code-box">/* STM32F407VGTx_FLASH.ld */<br><br>ENTRY(Reset_Handler)<br><br>_estack = 0x20020000;  /* End of RAM (128K) */<br><br>_Min_Heap_Size = 0x200;<br>_Min_Stack_Size = 0x400;<br><br>MEMORY<br>{<br>    FLASH (rx)  : ORIGIN = 0x08000000, LENGTH = 1024K<br>    RAM (xrw)   : ORIGIN = 0x20000000, LENGTH = 128K<br>    CCMRAM (rw) : ORIGIN = 0x10000000, LENGTH = 64K<br>}<br><br>SECTIONS<br>{<br>    .isr_vector :<br>    {<br>        . = ALIGN(4);<br>        KEEP(*(.isr_vector))<br>        . = ALIGN(4);<br>    } >FLASH<br><br>    .text :<br>    {<br>        . = ALIGN(4);<br>        *(.text)<br>        *(.text*)<br>        *(.glue_7)<br>        *(.glue_7t)<br>        *(.eh_frame)<br>        KEEP (*(.init))<br>        KEEP (*(.fini))<br>        . = ALIGN(4);<br>        _etext = .;<br>    } >FLASH<br><br>    .rodata :<br>    {<br>        . = ALIGN(4);<br>        *(.rodata)<br>        *(.rodata*)<br>        . = ALIGN(4);<br>    } >FLASH<br><br>    _sidata = LOADADDR(.data);<br><br>    .data :<br>    {<br>        . = ALIGN(4);<br>        _sdata = .;<br>        *(.data)<br>        *(.data*)<br>        . = ALIGN(4);<br>        _edata = .;<br>    } >RAM AT> FLASH<br><br>    .bss :<br>    {<br>        . = ALIGN(4);<br>        _sbss = .;<br>        __bss_start__ = _sbss;<br>        *(.bss)<br>        *(.bss*)<br>        *(COMMON)<br>        . = ALIGN(4);<br>        _ebss = .;<br>        __bss_end__ = _ebss;<br>    } >RAM<br><br>    ._user_heap_stack :<br>    {<br>        . = ALIGN(8);<br>        PROVIDE ( end = . );<br>        PROVIDE ( _end = . );<br>        . = . + _Min_Heap_Size;<br>        . = . + _Min_Stack_Size;<br>        . = ALIGN(8);<br>    } >RAM<br>}</div><h2>üîß Linker Script Symbols</h2><div class="code-box">/* Symbols created by linker script */<br><br>extern uint32_t _sidata;  /* Start of .data in Flash (LMA) */<br>extern uint32_t _sdata;   /* Start of .data in RAM (VMA) */<br>extern uint32_t _edata;   /* End of .data in RAM */<br>extern uint32_t _sbss;    /* Start of .bss */<br>extern uint32_t _ebss;    /* End of .bss */<br>extern uint32_t _estack;  /* End of stack */<br><br>/* Used in startup code */<br>void Reset_Handler(void) {<br>    uint32_t *src = &_sidata;<br>    uint32_t *dst = &_sdata;<br>    <br>    /* Copy .data from Flash to RAM */<br>    while (dst < &_edata) {<br>        *dst++ = *src++;<br>    }<br>    <br>    /* Zero .bss */<br>    dst = &_sbss;<br>    while (dst < &_ebss) {<br>        *dst++ = 0;<br>    }<br>}</div><h2>üìç Location Counter (.)</h2><div class="code-box">/* The dot (.) is the location counter */<br><br>.text : {<br>    . = ALIGN(4);      /* Align to 4 bytes */<br>    *(.text)<br>    . = . + 0x100;     /* Reserve 256 bytes */<br>    . = ALIGN(8);      /* Align to 8 bytes */<br>}</div><h2>üéØ Special Keywords</h2><div class="code-box">/* KEEP - Don't remove even if unused */<br>KEEP(*(.isr_vector))<br><br>/* PROVIDE - Define symbol if not already defined */<br>PROVIDE(__stack = _estack);<br><br>/* LOADADDR - Get load address (LMA) */<br>_sidata = LOADADDR(.data);<br><br>/* ADDR - Get virtual address (VMA) */<br>_sdata = ADDR(.data);<br><br>/* SIZEOF - Get section size */<br>_data_size = SIZEOF(.data);</div><div class="fun-fact"><strong>üåü Memory Magic:</strong><p style="margin-top:10px;margin-bottom:0">The linker script is like a city planner for your firmware! It decides which neighborhoods (sections) go where in the city (memory). Without it, your code would be homeless! Every embedded system needs this blueprint.</p></div><div class="quiz-box"><h3>üß† Test Your Knowledge!</h3><p><strong>Question:</strong> What does the AT> keyword specify?</p><ul><li>A) Virtual Memory Address (VMA)</li><li>B) Load Memory Address (LMA) ‚úì</li><li>C) Alignment requirement</li><li>D) Section size</li></ul><p style="margin-top:15px"><em>Answer: B - AT> specifies where data is loaded from (LMA in Flash)!</em></p></div></div>`,
    questions: [{ q: "What does the AT> keyword specify?", options: ["Virtual Memory Address (VMA)", "Load Memory Address (LMA)", "Alignment requirement", "Section size"], answer: 1 }],
    tools: [{ name: "Linker Script Generator", type: "interactive", description: "Generate custom linker scripts" }]
};
